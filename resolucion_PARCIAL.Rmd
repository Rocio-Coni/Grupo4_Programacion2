---
title: "Resolucion de Parcial"
author: "GRUPO 4"
date: "5/8/2021"
output: github_document
   
---
## Parte 2

**1. A partir del conjunto de datos:**

Primero debemos cargar la data a trabajar

```{r}
library(tidyverse)
data1 <- as_tibble(read.csv("mods_clima_uh.csv"))
```

a.Calcular la precipitacíon acumulada anual (Valores observados) para la cuenca asignada

```{r}
ppacmu <- data1 %>% dplyr::select(uh_name, bh_month , bh_pc , bh_esc) %>% 
  dplyr::filter(uh_name == "Cuenca Tumbes" , bh_esc == "Observado")%>% 
  summarise(ppacum = sum(bh_pc, na.rm = T))
ppacmu
```

b.Calcular el porcentaje de sesgo (% PBIAS) de los escenarios climàticos(ACCESS, HADGEM2 , MPI) respecto a los datos observados para cada mes ( enero- diciembre) de cada variable, para la cuenca asignada

```{r}
data5 <- data1 %>% dplyr::select(uh_name, bh_month , bh_pc , bh_esc) %>% 
  dplyr::filter(uh_name == "Cuenca Tumbes") %>%
  pivot_wider(names_from = "bh_esc", values_from = "bh_pc")
library(hydroGOF)
(OB_ACCES <-pbias(data5$`ACCESS 1.0` , data5$Observado , na.rm = T))
(OB_HadGE <-pbias(data5$`HadGEM2-ES` , data5$Observado , na.rm = T))
(OB_MPIEM <-pbias(data5$`MPI-ESM-LR` , data5$Observado , na.rm = T))
```

c.De la anterior, ¿Cuàl es el escenario climàtico màs preciso? Fundamente su respuesta.

-el modelo mejor estiamdo es el MPI-ESM-LR ya que tiene un valor cercano a 0 que es el optimo pero su valor negativo nos indica una subestimacion del modelo.

## PARTE 3

**1.Se tiene el conjunto de datos de temperatura diaria(periodo 1928 - 2015 ) de ciertas estaciones metereològicas (temperatureDataset.csv), donde cad una de estas estàsn asociadas a un còdigo ùnico(p.eqc00000208). Si existen valores iguales a -99.9, considerarlos como missing values y convertirlos en NA.**

```{r}
data2 <- as_tibble(read.csv("temperatureDataset.csv", na.strings = -99.9))

data3 <- data2 %>% select(DATE, qc00000805)%>%
  mutate(DATE = as.Date(DATE, format = "%d/%m/%Y"))%>% 
  rename(pp = qc00000805)%>% 
  arrange(DATE)
data3 %>% dplyr::filter(DATE %in%  seq(as.Date("1983-01-01"), as.Date("1984-08-31"), by ="day")) %>% 
  summarise( miss_invalue =sum(is.na(pp)))

```
b.Calcule la serie de tiempo de temperatura mensual ( si el de dias con missing values), en un mes, sUpera el 5%, la temperatura mensual seria considerado como un NA) mas, identifique,visualmente, osibles atipicos y describa una posible causa.




